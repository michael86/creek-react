import styles from "../styles/Landing.module.css";
import Global from "../styles/Global.module.css";
import gsap from "gsap";
import { useLayoutEffect } from "react";
import useContent from "../hooks/useContent";

const LandingTitle = ({ mm }) => {
  const [content] = useContent("landing");

  useLayoutEffect(() => {
    if (!content) return;
    const breakPoint = 991;

    mm.add(
      {
        // set up any number of arbitrarily-named conditions. The function below will be called when ANY of them match.
        isDesktop: `(min-width: ${breakPoint}px)`,
        isMobile: `(max-width: ${breakPoint - 1}px)`,
        reduceMotion: "(prefers-reduced-motion: reduce)",
      },
      (context) => {
        // context.conditions has a boolean property for each condition defined above indicating if it's matched or not.
        let { isDesktop, reduceMotion } = context.conditions;
        if (reduceMotion) return;

        gsap
          .timeline()
          .from("#site-logo path", {
            scale: isDesktop ? 2 : 1.5,
            y: -300,
            autoAlpha: 0,
            stagger: 0.1,
          })
          .from("h1", { autoAlpha: 0, y: 30 });
      }
    );

    return () => mm.revert();
  }, [content, mm]);

  return (
    <>
      {!content && <h3>loading</h3>}
      {content && (
        <div className={styles.siteTitle}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            xmlSpace="preserve"
            id="site-logo"
            x={0}
            y={0}
            style={{
              enableBackground: "new 0 0 2000 974",
            }}
            viewBox="0 0 2000 974"
          >
            <style>
              {".st0{stroke:#2583d1}.st0,.st11{fill:#2583d1}.st2{fill:#999;stroke:#999}"}
            </style>
            <path
              d="M892 129.9c-8.6 1.9-21.7 9.5-27.7 16.1-2.8 3.1-6.8 8.9-8.9 13l-3.8 7.4-.4 82c-.4 76.4-.2 82.1 2 83.7 1.3.9 4.3 1.7 6.6 1.7s18.9 3.9 36.8 8.6c70.9 18.8 79.6 20.8 124.4 28.6 40.5 7.1 63.7 10.1 88.1 11.6 19.2 1.2 20.7.7 23.4-7.8 1.9-5.9 2.2-20.8 2.2-106.3 0-63.5-.5-101.2-1.4-104.3-2.5-8.4-11.9-20.2-20.8-26-14.6-9.6-7.7-9-116.2-9.3-60.4-.2-100.5.2-104.3 1"
              className="st0"
            />
            <path
              d="M890.2 20c-2.5 1.2-6 4.3-7.8 7-3 4.5-3.2 6.8-3.9 32.1l-.7 27.3-4.9 1.1c-2.7.6-7.7 1.7-11.1 2.4-7.6 1.5-27.2 12.6-36.6 20.6-3.9 3.3-10.8 11.2-15.5 17.7-8.1 11.2-12.7 22.6-16.6 40.7l-.8 3.7h-26.2c-30.3 0-33.7.8-40.4 9.5-7.5 9.7-5.7 20.5 4.9 29.3l5.1 4.2h56.8v41.9h-24.6c-13.5 0-27.1.7-30.2 1.5-10.1 2.7-16.4 10.4-16.4 20.3 0 8.2 4 14.6 11.4 18.2 5.8 2.8 8.1 3 32.9 3h26.9l.4 15 .4 15 14.1 3c7.8 1.6 15.9 3 18 3l3.9.1v-81.1c0-62.8.5-83 2-89.5 3.1-13.6 13.9-27.4 28.7-36.6 16.8-10.5 6.7-9.8 133.4-9.8H1106l6.9 3c18.4 8 34 23.5 40.8 40.7 3 7.4 3 8.7 2.6 119.4l-.4 111.9h36.4v-9h27.6c26.8.6 28.3.5 32.7-2.4 7.7-5 10.5-9.5 10.5-17.4 0-8.7-4.6-16.4-11.4-19.1-3.4-1.4-11.9-1.8-31.6-2.1h-26.8v-44h24.3c13.4 0 26.3-.4 28.8-.9s6.9-3 9.8-5.6c10.8-9.7 8-26.2-5.6-33.3-2.5-1.3-11-1.9-30.4-2.3l-26.9-.5v-42.5h27.9c32.4 0 33.7-.4 39.7-10.8 5-8.6 4.5-15.2-1.7-23.4-6-7.9-9.7-8.7-40.4-8.8l-27.8-.1-1.8-10.3c-2.4-13.5-5.2-20.2-13.7-32.3-8-11.5-20-22.8-32-30.1-11.9-7.4-15.8-8.8-34.5-13l-3.8-.8-.4-28.5c-.4-28.3-.5-28.6-4-32.1-5.8-5.9-10.8-7.7-19.9-7-7.2.5-8.9 1.2-13.3 5.3-6.5 6.1-7.3 10.8-7.4 38.7l-.1 22.3H1015.2V59.4c0-14.1-.7-26.8-1.5-29-.8-2.1-4.4-5.9-7.9-8.4-5.9-4.2-7-4.5-14.9-3.9-6.8.5-9.6 1.4-13.9 4.6-7.8 5.9-8.8 9.8-8.9 37.5l-.1 24.3h-44.5v-25c0-14.3-.6-26.8-1.5-28.9-1.7-4.1-6.2-8.7-10.8-11-4.4-2.2-15.9-1.8-21.3.7"
              className="st0"
            />
            <path
              d="M455.8 734.3c-9.3 4.6-27.8 9.3-51.5 9.3-55 0-96.4-34.7-96.4-98.7 0-61.1 41.4-102.5 101.9-102.5 24.3 0 39.7 5.2 46.3 8.7l-6.1 20.6c-9.6-4.6-23.2-8.1-39.4-8.1-45.7 0-76.1 29.2-76.1 80.5 0 47.8 27.5 78.4 75 78.4 15.3 0 31-3.2 41.1-8.1l5.2 19.9zM487.4 548.2c12.7-2.6 31-4.1 48.3-4.1 26.9 0 44.3 4.9 56.4 15.9 9.8 8.7 15.3 22 15.3 37.1 0 25.8-16.2 42.8-36.8 49.8v.9c15.1 5.2 24 19.1 28.7 39.4 6.4 27.2 11 46 15.1 53.6h-26.1c-3.2-5.5-7.5-22.3-13-46.6-5.8-26.9-16.2-37.1-39.1-37.9h-23.7v84.5h-25.2V548.2zm25.2 88.8h25.8c26.9 0 44-14.8 44-37.1 0-25.2-18.2-36.2-44.9-36.5-12.2 0-20.8 1.2-24.9 2.3V637zM744.1 649.2h-75.8v70.3h84.5v21.1H643.1v-195h105.4v21.1h-80.2v61.7h75.8v20.8zM886.6 649.2h-75.8v70.3h84.5v21.1H785.5v-195h105.4v21.1h-80.2v61.7h75.8v20.8zM928 545.6h25.2v94.1h.9c5.2-7.5 10.4-14.5 15.3-20.8l59.6-73.2h31.3l-70.6 82.8 76.1 112.3H1036L971.7 645l-18.5 21.4v74.4H928V545.6zM1132 740.7l-63.7-195.1h27.2l30.4 96.1c8.4 26.3 15.6 50.1 20.8 72.9h.6c5.5-22.6 13.6-47.2 22.3-72.7l33-96.4h26.9l-69.8 195.1H1132zM1275.9 545.6v195.1h-25.2V545.6h25.2zM1420.9 649.2h-75.8v70.3h84.5v21.1h-109.7v-195h105.4v21.1h-80.2v61.7h75.8v20.8zM1496.8 740.7l-49.5-195.1h26.6l23.2 98.7c5.8 24.3 11 48.6 14.5 67.4h.6c3.2-19.4 9.3-42.6 15.9-67.7l26.1-98.4h26.3l23.7 99c5.5 23.2 10.7 46.3 13.6 66.9h.6c4.1-21.4 9.6-43.1 15.6-67.4l25.8-98.4h25.8l-55.3 195.1H1604l-24.6-101.6c-6.1-24.9-10.1-44-12.7-63.7h-.6c-3.5 19.4-7.8 38.5-15.1 63.7l-27.8 101.6h-26.4zM856.7 867.6h-75.8v70.3h84.5V959H755.7V764h105.4v21.1h-80.2v61.7h75.8v20.8zM1062.6 873.4c-1.4-27.2-3.2-59.9-2.9-84.2h-.9c-6.7 22.9-14.8 47.2-24.6 74.1L999.8 958h-19.1l-31.6-93c-9.3-27.5-17.1-52.7-22.6-75.8h-.6c-.6 24.3-2 57-3.8 86.3l-5.2 83.7h-24L906.5 764h32.1l33.3 94.4c8.1 24 14.8 45.4 19.7 65.7h.9c4.9-19.7 11.9-41.1 20.6-65.7l34.7-94.4h32.1l12.2 195.1h-24.6l-4.9-85.7zM1127.4 928.4c11.3 6.9 27.8 12.7 45.2 12.7 25.8 0 40.8-13.6 40.8-33.3 0-18.2-10.4-28.7-36.8-38.8-31.8-11.3-51.5-27.8-51.5-55.3 0-30.4 25.2-53 63.1-53 20 0 34.4 4.6 43.1 9.6l-6.9 20.6c-6.4-3.5-19.4-9.3-37.1-9.3-26.6 0-36.8 15.9-36.8 29.2 0 18.2 11.9 27.2 38.8 37.6 33 12.7 49.8 28.7 49.8 57.3 0 30.1-22.3 56.2-68.3 56.2-18.8 0-39.4-5.5-49.8-12.4l6.4-21.1z"
              className="st11"
            />
            <path
              d="M572.8 351.5c57-33.3 126.9-35.1 191.9-32.9 100.8 3.5 177.7 28.3 264.8 49.5 60.1 14.6 147.4 24.8 177.6 25.6 30.1.8 86.4-1.6 136.2-15 24.4-6.6 69.6-29.1 69.6-29.1s-25.1 56.2-64.6 79.8c-33.3 19.9-72.2 33-111.3 37.5-59.8 6.9-121.9-1.7-179.9-16.9-44.9-11.8-87.1-28.2-144.6-49.6-23.1-8.6-72.7-21.2-109.9-31.1-134.6-35.8-236.3-14-229.8-17.8z"
              className="st2"
            />
            <path
              d="M683 439.1s62-29.3 108.4-29.4c39.4 0 63.8 4.5 95.7 15.3 35.4 12 69.8 23.6 105.4 32.5 36.4 9 63.7 14.1 96.1 19 42.2 6.4 65.9 8.3 99.1 8.3 24.2 0 48.6-2.2 72.4-6.1 14.1-2.4 47-13.9 41.6-10.4-24.4 15.8-51.8 27.2-79.6 36.8-26.8 9.3-54.8 16.6-83.2 19.6-31.5 3.4-63.7 2.6-95.2-1.5-27.5-3.6-54.1-12.3-80.6-20.2-35.5-10.6-66-26.6-104.9-36.5-33.6-8.6-67.2-18.1-101.7-23-24.1-3.6-73.5-4.4-73.5-4.4z"
              className="st2"
            />
          </svg>

          <h1 className={`${Global.mt2}`}>{content.subtitle}</h1>
        </div>
      )}
    </>
  );
};

export default LandingTitle;
